<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:MegaApp.Converters"
    xmlns:selectors="using:MegaApp.Classes"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:behaviors="using:MegaApp.Behaviors"
    xmlns:toolkit="using:Microsoft.Toolkit.Uwp.UI.Converters">

    <!-- Resource dictionary entries should be defined here. -->

    <!-- APP THEME OVERRIDES -->

    <!--Measurements-->
    <GridLength x:Key="MegaPageHeaderLogoRowHeight">44</GridLength>
    <x:Double x:Key="InputHeight">40</x:Double>
    <GridLength x:Key="PageHeaderRowHeight">48</GridLength>

    <!--Margins-->
    <Thickness x:Key="StackedInputMargin">0,0,0,8</Thickness>
    <Thickness x:Key="MegaPageHeaderLogoMargin">10,0,0,0</Thickness>

    <!--Vector Data-->
    <x:String x:Key="MegaIconVector">F1 M 18.092,16.246 C 18.092,16.450 17.927,16.615 17.725,16.615 L 16.168,16.615 C 15.966,16.615 15.802,16.450 15.802,16.246 L 15.802,11.419 C 15.802,11.378 15.752,11.357 15.723,11.387 L 12.427,14.709 C 12.140,14.997 11.676,14.997 11.390,14.709 L 8.094,11.387 C 8.065,11.357 8.015,11.378 8.015,11.419 L 8.015,16.246 C 8.015,16.450 7.851,16.615 7.649,16.615 L 6.092,16.615 C 5.889,16.615 5.725,16.450 5.725,16.246 L 5.725,7.754 C 5.725,7.550 5.889,7.385 6.092,7.385 L 7.162,7.385 C 7.356,7.385 7.543,7.462 7.680,7.601 L 11.779,11.731 C 11.850,11.803 11.966,11.803 12.038,11.731 L 16.136,7.601 C 16.274,7.462 16.460,7.385 16.655,7.385 L 17.725,7.385 C 17.927,7.385 18.092,7.550 18.092,7.754 L 18.092,16.246 Z M 12.000,0.000 C 5.373,0.000 0.000,5.373 0.000,12.000 C 0.000,18.627 5.373,24.000 12.000,24.000 C 18.627,24.000 24.000,18.627 24.000,12.000 C 24.000,5.373 18.627,0.000 12.000,0.000 Z</x:String>

    <!-- CONVERTERS -->
    <converters:FolderContentViewStateToVisibilityConverter x:Key="FolderContentViewStateToVisibilityConverter"/>
    <converters:NodeDisplayModeToColorBrushConverter x:Key="NodeDisplayModeToColorBrushConverter"/>
    <converters:TextToLowerCaseConverter x:Key="TextToLowerCaseConverter"/>
    <converters:TransferStateToReadableTextConverter x:Key="TransferStateToReadableTextConverter"/>
    <converters:TransferStateToVisibilityConverter x:Key="TransferStateToVisibilityConverter"/>
    <converters:TransferTypeToSymbolConverter x:Key="TransferTypeToSymbolConverter"/>
    <converters:ViewStateToVisibilityConverter x:Key="ViewStateToVisibilityConverter"/>
    <toolkit:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    <toolkit:BoolToObjectConverter x:Key="InverseBoolToVisibilityConverter" TrueValue="Collapsed" FalseValue="Visible"/>
    <toolkit:StringVisibilityConverter x:Key="StringVisibilityConverter"/>

    <!--SELECTORS -->
    <selectors:NodeTemplateSelector 
        x:Key="NodeTemplateSelector" 
        FileItemTemplate="{StaticResource MegaNodeListViewFileItemContent}" 
        FolderItemTemplate="{StaticResource MegaNodeListViewFolderItemContent}"/>

    <!-- TEMPLATES -->
    <DataTemplate x:Key="MegaPageHeaderLogo">
        <Border 
            Background="{StaticResource MegaAppBackgroundBrush}" 
            Height="44" 
            Width="44">
            <Path 
                Data="{StaticResource MegaIconVector}" 
                Height="24" 
                Width="24" 
                StrokeThickness="0"
                Stretch="UniformToFill" 
                Fill="{StaticResource MegaHeaderIconColorBrush}" 
                FlowDirection="LeftToRight"/>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="MegaPivoHeaderTemplate">
        <Grid>
            <TextBlock 
                Text="{Binding}" 
                FontFamily="Segoe UI" 
                FontSize="24" 
                FontWeight="Normal"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="BreadcrumbHomeMegaTemplate">
        <Grid>
            <Path 
                x:Name="BreadcrumbHomeMegaIcon" 
                Height="14" 
                Width="14" 
                Data="{Binding BreadcrumbHomeMegaIcon}" 
                Stretch="UniformToFill">
                <Path.Fill>
                    <SolidColorBrush Color="{ThemeResource MegaAppForeground}"/>
                </Path.Fill>
            </Path>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="BreadcrumbHomeRubbishBinTemplate">
        <Grid>
            <Path 
                x:Name="BreadcrumbHomeRubbishBinIcon" 
                Height="14" 
                Width="14" 
                Data="{Binding BreadcrumbHomeRubbishBinIcon}" 
                Stretch="UniformToFill">
                <Path.Fill>
                    <SolidColorBrush Color="{ThemeResource MegaAppForeground}"/>
                </Path.Fill>
            </Path>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="BreadcrumbItemTemplate">
        <Grid>
            <TextBlock 
                Text="{Binding Name}" 
                Style="{ThemeResource CaptionTextBlockStyle}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="MegaNodeListViewFileItemContent">
        <Border 
            Margin="-12,1" 
            BorderThickness="2,2,2,2" 
            Background="{Binding DisplayMode, ConverterParameter=0\,4, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}" 
            BorderBrush="{Binding DisplayMode, ConverterParameter=1\,0, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}">
            <Grid 
                Margin="12,4"
                Background="Transparent">
                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout>
                        <MenuFlyout.Items>
                            <MenuFlyoutItem 
                                Text="{Binding DownloadText}"
                                Command="{Binding DownloadCommand}"
                                Visibility="{Binding Parent, ConverterParameter='download', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RenameText}" 
                                Command="{Binding RenameCommand}"
                                Visibility="{Binding Parent, ConverterParameter='rename', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding CopyOrMoveText}" 
                                Command="{Binding CopyOrMoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='copyormove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding MoveToRubbishBinText}" 
                                Command="{Binding MoveToRubbishBinCommand}"
                                Visibility="{Binding Parent, ConverterParameter='movetorubbish', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RemoveText}" 
                                Command="{Binding RemoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='remove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                        </MenuFlyout.Items>
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
                <interactivity:Interaction.Behaviors>
                    <core:EventTriggerBehavior EventName="RightTapped">
                        <behaviors:OpenFlyoutAction IsEnabled="True"/>
                    </core:EventTriggerBehavior>
                </interactivity:Interaction.Behaviors>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Row="0" 
                    Grid.RowSpan="2" 
                    Grid.Column="0">
                    <Path 
                        Data="{Binding DefaultImagePathData}" 
                        Canvas.ZIndex="0" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center" 
                        Width="36" 
                        Height="36" 
                        Stretch="Uniform" 
                        Margin="0,0,12,0" 
                        Visibility="{Binding IsDefaultImage, Converter={StaticResource BoolToVisibilityConverter}}">
                        <Path.Fill>
                            <SolidColorBrush Color="{ThemeResource MegaAppForeground}"/>
                        </Path.Fill>
                    </Path>
                    <Image 
                        HorizontalAlignment="Center" 
                        Canvas.ZIndex="1" 
                        VerticalAlignment="Center"
                        Width="36" 
                        Height="36" 
                        Stretch="UniformToFill" 
                        Margin="0,0,12,0" 
                        Visibility="{Binding IsDefaultImage, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                        <Image.Source>
                            <BitmapImage
                                UriSource="{Binding ThumbnailImageUri}"
                                DecodePixelHeight="36"
                                DecodePixelType="Logical"/>
                        </Image.Source>
                    </Image>
                </Grid>

                <TextBlock 
                    x:Name="txtFileName" 
                    HorizontalAlignment="Left" 
                    TextWrapping="NoWrap"
                    Text="{Binding Name}" 
                    TextTrimming="CharacterEllipsis" 
                    VerticalAlignment="Center" 
                    Style="{ThemeResource BaseTextBlockStyle}" 
                    Grid.Column="1" 
                    Grid.Row="0" 
                    Grid.ColumnSpan="2"/>
                <TextBlock 
                    x:Name="txtSize" 
                    HorizontalAlignment="Left" 
                    TextWrapping="NoWrap" 
                    Text="{Binding Information}" 
                    VerticalAlignment="Center" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Grid.Row="1" 
                    Grid.Column="1"/>
                <TextBlock 
                    x:Name="txtCreated" 
                    HorizontalAlignment="Right" 
                    TextWrapping="NoWrap" 
                    Text="{Binding ModificationTime}" 
                    VerticalAlignment="Center" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Grid.Row="1" 
                    Grid.Column="2"/>
            </Grid>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="MegaNodeGridViewFileItemContent">
        <Border 
            BorderThickness="1" 
            Background="{Binding DisplayMode, ConverterParameter=0\,4, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}" 
            BorderBrush="{Binding DisplayMode, ConverterParameter=1\,0, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}">
            <Grid 
                Width="96"
                Background="Transparent" >
                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout>
                        <MenuFlyout.Items>
                            <MenuFlyoutItem 
                                Text="{Binding DownloadText}"
                                Command="{Binding DownloadCommand}"
                                Visibility="{Binding Parent, ConverterParameter='download', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RenameText}" 
                                Command="{Binding RenameCommand}"
                                Visibility="{Binding Parent, ConverterParameter='rename', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding CopyOrMoveText}" 
                                Command="{Binding CopyOrMoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='copyormove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding MoveToRubbishBinText}" 
                                Command="{Binding MoveToRubbishBinCommand}"
                                Visibility="{Binding Parent, ConverterParameter='movetorubbish', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RemoveText}" 
                                Command="{Binding RemoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='remove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                        </MenuFlyout.Items>
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
                <interactivity:Interaction.Behaviors>
                    <core:EventTriggerBehavior EventName="RightTapped">
                        <behaviors:OpenFlyoutAction IsEnabled="True"/>
                    </core:EventTriggerBehavior>
                </interactivity:Interaction.Behaviors>
                <Grid.RowDefinitions>
                    <RowDefinition Height="96"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Path 
                    Grid.Row="0" 
                    Data="{Binding DefaultImagePathData}" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center" 
                    Width="64" 
                    Height="64" 
                    Stretch="Uniform" 
                    Visibility="{Binding IsDefaultImage, Converter={StaticResource BoolToVisibilityConverter}}">
                    <Path.Fill>
                        <SolidColorBrush Color="{StaticResource MegaAppForeground}"/>
                    </Path.Fill>
                </Path>
                <Image 
                    Grid.Row="0" 
                    Stretch="UniformToFill" 
                    Height="96" 
                    Width="96" 
                    Visibility="{Binding IsDefaultImage, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                    <Image.Source>
                        <BitmapImage
                            UriSource="{Binding ThumbnailImageUri}"
                            DecodePixelHeight="96"
                            DecodePixelType="Logical"/>
                    </Image.Source>
                </Image>
                <TextBlock
                    Margin="0,4,0,0" 
                    HorizontalAlignment="Stretch"
                    TextAlignment="Center"
                    TextWrapping="NoWrap"
                    Text="{Binding Name}" 
                    TextTrimming="CharacterEllipsis"
                    VerticalAlignment="Bottom" 
                    Style="{ThemeResource BaseTextBlockStyle}" 
                    Grid.Row="1"/>
            </Grid>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="MegaNodeListViewFolderItemContent">
        <Border 
            Margin="-12,1" 
            BorderThickness="2,2,2,2" 
            Background="{Binding DisplayMode, ConverterParameter=0\,4, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}" 
            BorderBrush="{Binding DisplayMode, ConverterParameter=1\,0, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}">
            <Grid 
                Margin="12,4"
                Background="Transparent">
                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout>
                        <MenuFlyout.Items>
                            <MenuFlyoutItem 
                                Text="{Binding DownloadText}"
                                Command="{Binding DownloadCommand}"
                                Visibility="{Binding Parent, ConverterParameter='download', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RenameText}" 
                                Command="{Binding RenameCommand}"
                                Visibility="{Binding Parent, ConverterParameter='rename', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding CopyOrMoveText}" 
                                Command="{Binding CopyOrMoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='copyormove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding MoveToRubbishBinText}" 
                                Command="{Binding MoveToRubbishBinCommand}"
                                Visibility="{Binding Parent, ConverterParameter='movetorubbish', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RemoveText}" 
                                Command="{Binding RemoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='remove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                        </MenuFlyout.Items>
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
                <interactivity:Interaction.Behaviors>
                    <core:EventTriggerBehavior EventName="RightTapped">
                        <behaviors:OpenFlyoutAction IsEnabled="True"/>
                    </core:EventTriggerBehavior>
                </interactivity:Interaction.Behaviors>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <Grid 
                    Grid.Row="0" 
                    Grid.RowSpan="2" 
                    Grid.Column="0">
                    <Path 
                        Data="{Binding DefaultImagePathData}" 
                        Canvas.ZIndex="0" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Width="36" 
                        Height="36" 
                        Stretch="Uniform" 
                        Margin="0,0,12,0">
                        <Path.Fill>
                            <SolidColorBrush Color="{ThemeResource MegaAppForeground}"/>
                        </Path.Fill>
                    </Path>
                </Grid>

                <TextBlock 
                    x:Name="txtFolderName" 
                    HorizontalAlignment="Left" 
                    TextWrapping="NoWrap"
                    Text="{Binding Name}" 
                    TextTrimming="CharacterEllipsis" 
                    VerticalAlignment="Center" 
                    Style="{ThemeResource BaseTextBlockStyle}" 
                    Grid.Column="1" 
                    Grid.Row="0" 
                    Grid.ColumnSpan="2"/>
                <TextBlock 
                    x:Name="txtCount" 
                    HorizontalAlignment="Left" 
                    TextWrapping="NoWrap" 
                    Text="{Binding Information}" 
                    VerticalAlignment="Center" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Grid.Row="1" 
                    Grid.Column="1"/>
                <TextBlock 
                    x:Name="txtCreated" 
                    HorizontalAlignment="Right" 
                    TextWrapping="NoWrap"
                    Text="{Binding CreationTime}" 
                    VerticalAlignment="Center" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Grid.Row="1" 
                    Grid.Column="2"/>
            </Grid>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="MegaNodeGridViewFolderItemContent">
        <Border 
            BorderThickness="1" 
            Background="{Binding DisplayMode, ConverterParameter=0\,4, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}" 
            BorderBrush="{Binding DisplayMode, ConverterParameter=1\,0, Converter={StaticResource NodeDisplayModeToColorBrushConverter}}">
            <Grid 
                Width="96"
                Background="Transparent">
                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout>
                        <MenuFlyout.Items>
                            <MenuFlyoutItem 
                                Text="{Binding DownloadText}"
                                Command="{Binding DownloadCommand}"
                                Visibility="{Binding Parent, ConverterParameter='download', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RenameText}" 
                                Command="{Binding RenameCommand}"
                                Visibility="{Binding Parent, ConverterParameter='rename', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding CopyOrMoveText}" 
                                Command="{Binding CopyOrMoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='copyormove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding MoveToRubbishBinText}" 
                                Command="{Binding MoveToRubbishBinCommand}"
                                Visibility="{Binding Parent, ConverterParameter='movetorubbish', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                            <MenuFlyoutItem 
                                Text="{Binding RemoveText}" 
                                Command="{Binding RemoveCommand}"
                                Visibility="{Binding Parent, ConverterParameter='remove', Converter={StaticResource ViewStateToVisibilityConverter}}"/>
                        </MenuFlyout.Items>
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
                <interactivity:Interaction.Behaviors>
                    <core:EventTriggerBehavior EventName="RightTapped">
                        <behaviors:OpenFlyoutAction IsEnabled="True"/>
                    </core:EventTriggerBehavior>
                </interactivity:Interaction.Behaviors>
                <Grid.RowDefinitions>
                    <RowDefinition Height="96"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Path 
                    Data="{Binding DefaultImagePathData}" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center" 
                    Width="64" 
                    Height="64" 
                    Stretch="Uniform">
                    <Path.Fill>
                        <SolidColorBrush Color="{StaticResource MegaAppForeground}"/>
                    </Path.Fill>
                </Path>                
                <TextBlock
                    Margin="0,4,0,0" 
                    HorizontalAlignment="Stretch" 
                    TextAlignment="Center" 
                    TextWrapping="NoWrap"
                    Text="{Binding Name}" 
                    TextTrimming="CharacterEllipsis" 
                    VerticalAlignment="Center"
                    Style="{ThemeResource BaseTextBlockStyle}" 
                    Grid.Row="1"/>
            </Grid>
        </Border>
    </DataTemplate>
    
    <Style x:Key="MegaCleanListViewItemStyle" TargetType="ListViewItem">
        <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
        <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
        <Setter Property="TabNavigation" Value="Local"/>
        <Setter Property="IsHoldingEnabled" Value="True"/>
        <Setter Property="Padding" Value="12,0,12,0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="MinWidth" Value="{ThemeResource ListViewItemMinWidth}"/>
        <Setter Property="MinHeight" Value="{ThemeResource ListViewItemMinHeight}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <ContentPresenter/>
                    <!--<ListViewItemPresenter CheckBrush="{ThemeResource SystemControlForegroundBaseMediumHighBrush}" ContentMargin="{TemplateBinding Padding}" CheckMode="Inline" ContentTransitions="{TemplateBinding ContentTransitions}" CheckBoxBrush="{ThemeResource SystemControlForegroundBaseMediumHighBrush}" DragForeground="{ThemeResource ListViewItemDragForegroundThemeBrush}" DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}" DragBackground="{ThemeResource ListViewItemDragBackgroundThemeBrush}" DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}" FocusBorderBrush="{ThemeResource SystemControlForegroundAltHighBrush}" FocusSecondaryBorderBrush="{ThemeResource SystemControlForegroundBaseHighBrush}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" PointerOverForeground="{ThemeResource SystemControlHighlightAltBaseHighBrush}" PressedBackground="{ThemeResource SystemControlHighlightListMediumBrush}" PlaceholderBackground="{ThemeResource ListViewItemPlaceholderBackgroundThemeBrush}" PointerOverBackground="{ThemeResource SystemControlHighlightListLowBrush}" ReorderHintOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" SelectedPressedBackground="{ThemeResource SystemControlHighlightListAccentHighBrush}" SelectionCheckMarkVisualEnabled="True" SelectedForeground="{ThemeResource SystemControlHighlightAltBaseHighBrush}" SelectedPointerOverBackground="{ThemeResource SystemControlHighlightListAccentMediumBrush}" SelectedBackground="{ThemeResource SystemControlHighlightListAccentLowBrush}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>-->
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <DataTemplate x:Key="MegaTransferItemContentMobile">
        <Grid 
            Margin="0,8"
            Background="Transparent">
            <FlyoutBase.AttachedFlyout>
                <MenuFlyout>
                    <MenuFlyout.Items>
                        <MenuFlyoutItem
                            Text="{Binding PauseText}"
                            Command="{Binding PauseOrResumeTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='pause', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding ResumeText}"
                            Command="{Binding PauseOrResumeTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='resume', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding CancelText}"
                            Command="{Binding CancelTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='cancel', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding RetryText}"
                            Command="{Binding RetryTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='retry', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding RemoveText}"
                            Command="{Binding RemoveTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='remove', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                    </MenuFlyout.Items>
                </MenuFlyout>
            </FlyoutBase.AttachedFlyout>
            <interactivity:Interaction.Behaviors>
                <core:EventTriggerBehavior EventName="RightTapped">
                    <behaviors:OpenFlyoutAction IsEnabled="{Binding IsActionAvailable}"/>
                </core:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Path 
                Margin="0,0,8,0"
                Grid.Row="0"
                Grid.Column="0"
                Grid.RowSpan="3"
                Width="36" 
                Height="36" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Data="{Binding FileTypePathData}" 
                Stretch="Uniform"                
                Visibility="{Binding IsDefaultImage, Converter={StaticResource BoolToVisibilityConverter}}">
                <Path.Fill>
                    <SolidColorBrush Color="{StaticResource MegaAppForeground}"/>
                </Path.Fill>
            </Path>
            <Image 
                Margin="0,0,8,0"
                Grid.Row="0" 
                Grid.Column="0" 
                Grid.RowSpan="3"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center" 
                Stretch="UniformToFill"
                Visibility="{Binding IsDefaultImage, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                <Image.Source>
                    <BitmapImage 
                        UriSource="{Binding ThumbnailUri}"
                        DecodePixelHeight="36"
						DecodePixelWidth="36"
						DecodePixelType="Logical"
                        />
                </Image.Source>
            </Image>
            <TextBlock 
                Grid.Row="0" 
                Grid.Column="1"
                Text="{Binding DisplayName}" 
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                TextTrimming="WordEllipsis"
                Style="{ThemeResource BaseTextBlockStyle}"/>
            <ProgressBar 
                Grid.Row="1" 
                Grid.Column="1"
                VerticalAlignment="Center" 
                Minimum="0" 
                Maximum="{Binding TotalBytes}"
                Value="{Binding TransferedBytes}" 
                IsIndeterminate="False"
                Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}">
                <ProgressBar.Foreground>
                    <SolidColorBrush Color="{StaticResource MegaRedColor}"/>
                </ProgressBar.Foreground>
                <ProgressBar.Background>
                    <SolidColorBrush Color="White" Opacity="0.3"/>
                </ProgressBar.Background>
            </ProgressBar>
            <Grid
                Grid.Row="2" 
                Grid.Column="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock
                    Grid.Column="0"
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Top" 
                    Text="{Binding TotalBytesText}" 
                    TextWrapping="NoWrap" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Foreground="{StaticResource MegaAppForegroundBrush}"
                    Visibility="{Binding IsBusy, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                <TextBlock
                    Grid.Column="0"
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Center" 
                    Text="{Binding TransferedAndTotalBytes}" 
                    TextWrapping="NoWrap" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Foreground="{StaticResource MegaAppForegroundBrush}"
                    Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}"/>
                <Viewbox
                    Margin="0,0,8,0"
                    Grid.Column="1"
                    MaxWidth="12"
                    MaxHeight="12"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center">
                    <SymbolIcon
                        Symbol="{Binding Type, Converter={StaticResource TransferTypeToSymbolConverter}}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
                <TextBlock 
                    Grid.Column="2"
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Top" 
                    Text="{Binding TypeAndState, Converter={StaticResource TransferStateToReadableTextConverter}}" 
                    TextWrapping="NoWrap" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Foreground="{StaticResource MegaAppForegroundBrush}"
                    Visibility="{Binding IsBusy, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                <TextBlock 
                    Grid.Column="2"
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Top"
                    Text="{Binding EstimatedTime}"
                    TextWrapping="NoWrap" 
                    Style="{ThemeResource CaptionTextBlockStyle}" 
                    Foreground="{StaticResource MegaAppForegroundBrush}"
                    Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}"/>
            </Grid>
            <Button
                Grid.Row="0" 
                Grid.Column="2" 
                Grid.RowSpan="3"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding CancelTransferCommand}">
                <Viewbox
                    MaxWidth="16"
                    MaxHeight="16">
                    <SymbolIcon
                        Symbol="Cancel"
                        ToolTipService.ToolTip="{Binding CancelText}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
            </Button>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="MegaTransferItemContentDesktop">
        <Grid 
            Margin="0,8"
            Background="Transparent">
            <FlyoutBase.AttachedFlyout>
                <MenuFlyout>
                    <MenuFlyout.Items>
                        <MenuFlyoutItem
                            Text="{Binding PauseText}"
                            Command="{Binding PauseOrResumeTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='pause', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding ResumeText}"
                            Command="{Binding PauseOrResumeTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='resume', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding CancelText}"
                            Command="{Binding CancelTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='cancel', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding RetryText}"
                            Command="{Binding RetryTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='retry', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                        <MenuFlyoutItem
                            Text="{Binding RemoveText}"
                            Command="{Binding RemoveTransferCommand}"
                            Visibility="{Binding TransferState, ConverterParameter='remove', Converter={StaticResource TransferStateToVisibilityConverter}}"/>
                    </MenuFlyout.Items>
                </MenuFlyout>
            </FlyoutBase.AttachedFlyout>
            <interactivity:Interaction.Behaviors>
                <core:EventTriggerBehavior EventName="RightTapped">
                    <behaviors:OpenFlyoutAction IsEnabled="{Binding IsActionAvailable}"/>
                </core:EventTriggerBehavior>
            </interactivity:Interaction.Behaviors>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="70"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Path 
                Margin="0,0,8,0"
                Grid.Row="0"
                Grid.Column="0"
                Grid.RowSpan="2"
                Width="36" 
                Height="36" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Data="{Binding FileTypePathData}" 
                Stretch="Uniform"                
                Visibility="{Binding IsDefaultImage, Converter={StaticResource BoolToVisibilityConverter}}">
                <Path.Fill>
                    <SolidColorBrush Color="{StaticResource MegaAppForeground}"/>
                </Path.Fill>
            </Path>
            <Image 
                Margin="0,0,8,0"
                Grid.Row="0" 
                Grid.Column="0" 
                Grid.RowSpan="2"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center" 
                Stretch="UniformToFill"
                Visibility="{Binding IsDefaultImage, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                <Image.Source>
                    <BitmapImage 
                        UriSource="{Binding ThumbnailUri}"
                        DecodePixelHeight="36"
						DecodePixelWidth="36"
						DecodePixelType="Logical"
                        />
                </Image.Source>
            </Image>
            <TextBlock 
                Grid.Row="0" 
                Grid.Column="1"
                Margin="0,0,20,0"
                Text="{Binding DisplayName}" 
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                TextTrimming="WordEllipsis"
                Style="{ThemeResource BaseTextBlockStyle}"/>
            <TextBlock 
                Grid.Row="0" 
                Grid.Column="2"
                Margin="0,0,20,0"
                HorizontalAlignment="Right" 
                VerticalAlignment="Center" 
                Text="{Binding TotalBytesText}" 
                TextWrapping="NoWrap" 
                Style="{ThemeResource CaptionTextBlockStyle}" 
                Foreground="{StaticResource MegaAppForegroundBrush}"
                Visibility="{Binding IsBusy, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
            <TextBlock 
                Grid.Row="0" 
                Grid.Column="2"
                Margin="0,0,20,0"
                HorizontalAlignment="Right" 
                VerticalAlignment="Center" 
                Text="{Binding TransferedAndTotalBytes}" 
                TextWrapping="NoWrap" 
                Style="{ThemeResource CaptionTextBlockStyle}" 
                Foreground="{StaticResource MegaAppForegroundBrush}"
                Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}"/>
            <Viewbox
                Margin="0,0,8,0"
                Grid.Row="0"
                Grid.Column="3"
                MaxWidth="16"
                MaxHeight="16"
                HorizontalAlignment="Left"
                VerticalAlignment="Center">
                <SymbolIcon
                    Symbol="{Binding Type, Converter={StaticResource TransferTypeToSymbolConverter}}"
                    Foreground="{StaticResource MegaAppForegroundBrush}"/>
            </Viewbox>
            <TextBlock 
                Grid.Row="0" 
                Grid.Column="4"
                Margin="0,0,8,0"
                HorizontalAlignment="Left" 
                VerticalAlignment="Center"
                Text="{Binding EstimatedTime}"
                TextWrapping="NoWrap" 
                Style="{ThemeResource CaptionTextBlockStyle}" 
                Foreground="{StaticResource MegaAppForegroundBrush}"
                Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}"/>
            <TextBlock 
                Grid.Row="0" 
                Grid.Column="4"
                Margin="0,0,8,0"
                HorizontalAlignment="Left" 
                VerticalAlignment="Center" 
                Text="{Binding TypeAndState, Converter={StaticResource TransferStateToReadableTextConverter}}" 
                TextWrapping="NoWrap" 
                Style="{ThemeResource CaptionTextBlockStyle}" 
                Foreground="{StaticResource MegaAppForegroundBrush}"
                Visibility="{Binding IsBusy, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
            <ProgressBar 
                Grid.Row="1" 
                Grid.Column="1"
                Grid.ColumnSpan="4"
                Margin="0,0,0,8"
                VerticalAlignment="Top" 
                Minimum="0" 
                Maximum="{Binding TotalBytes}"
                Value="{Binding TransferedBytes}" 
                IsIndeterminate="False"
                Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}">
                <ProgressBar.Foreground>
                    <SolidColorBrush Color="{StaticResource MegaRedColor}"/>
                </ProgressBar.Foreground>
                <ProgressBar.Background>
                    <SolidColorBrush Color="White" Opacity="0.3"/>
                </ProgressBar.Background>
            </ProgressBar>
            <Button
                Grid.Row="0" 
                Grid.Column="5" 
                Grid.RowSpan="2"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding PauseOrResumeTransferCommand}"
                Visibility="{Binding TransferState, ConverterParameter='pause', Converter={StaticResource TransferStateToVisibilityConverter}}">
                <Viewbox
                    MaxWidth="16"
                    MaxHeight="16">
                    <SymbolIcon
                        Symbol="Pause"
                        ToolTipService.ToolTip="{Binding PauseText}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
            </Button>
            <Button
                Grid.Row="0" 
                Grid.Column="5" 
                Grid.RowSpan="2"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding PauseOrResumeTransferCommand}"
                Visibility="{Binding TransferState, ConverterParameter='resume', Converter={StaticResource TransferStateToVisibilityConverter}}">
                <Viewbox
                    MaxWidth="16"
                    MaxHeight="16">
                    <SymbolIcon
                        Symbol="Play"
                        ToolTipService.ToolTip="{Binding ResumeText}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
            </Button>
            <Button
                Grid.Row="0" 
                Grid.Column="5" 
                Grid.RowSpan="2"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding RetryTransferCommand}"
                Visibility="{Binding TransferState, ConverterParameter='retry', Converter={StaticResource TransferStateToVisibilityConverter}}">
                <Viewbox
                    MaxWidth="16"
                    MaxHeight="16">
                    <SymbolIcon
                        Symbol="Refresh"
                        ToolTipService.ToolTip="{Binding RetryText}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
            </Button>
            <Button
                Grid.Row="0" 
                Grid.Column="6" 
                Grid.RowSpan="2"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding RemoveTransferCommand}"
                Visibility="{Binding TransferState, ConverterParameter='remove', Converter={StaticResource TransferStateToVisibilityConverter}}">
                <Viewbox
                    MaxWidth="16"
                    MaxHeight="16">
                    <SymbolIcon
                        Symbol="Delete"
                        ToolTipService.ToolTip="{Binding RemoveText}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
            </Button>
            <Button
                Grid.Row="0" 
                Grid.Column="6" 
                Grid.RowSpan="2"
                Width="36" 
                Height="36"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding CancelTransferCommand}"
                Visibility="{Binding TransferState, ConverterParameter='cancel', Converter={StaticResource TransferStateToVisibilityConverter}}">
                <Viewbox
                    MaxWidth="16"
                    MaxHeight="16">
                    <SymbolIcon
                        Symbol="Cancel"
                        ToolTipService.ToolTip="{Binding CancelText}"
                        Foreground="{StaticResource MegaAppForegroundBrush}"/>
                </Viewbox>
            </Button>
        </Grid>
    </DataTemplate>

</ResourceDictionary>

